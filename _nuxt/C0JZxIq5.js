import{D as B,s as O,r as x,e as K,g as M,h as z,j as G,k as J,l as U,n as Q,ar as X,ae as P,aj as A,a2 as Y,U as Z,a3 as ee,E as k,ak as re}from"./DjwMVzQH.js";function te(r){let t=9;for(let s=0;s<r.length;)t=Math.imul(t^r.charCodeAt(s++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}const ne=new Set(["onload","onerror"]);let oe;function N(){return oe}const D=Symbol("ScriptProxyTarget");function W(){}W[D]=!0;function F(r){return r.key||te(r.src||(typeof r.innerHTML=="string"?r.innerHTML:""))}function se(r,t){var $,T,j;const s=typeof r=="string"?{src:r}:r,e=t||{},i=e.head||N();if(!i)throw new Error("Missing Unhead context.");const u=F(s),f=($=i._scripts)==null?void 0:$[u];if(f)return f.setupTriggerHandler(e.trigger),f;(T=e.beforeInit)==null||T.call(e);const d=o=>{n.status=o,i.hooks.callHook("script:updated",V)};ne.forEach(o=>{const a=typeof s[o]=="function"?s[o].bind(e.eventContext):null;s[o]=c=>{d(o==="onload"?"loaded":o==="onerror"?"error":"loading"),a==null||a(c)}});const l={loaded:[],error:[]},g=(o,a)=>{if(l[o]){const c=l[o].push(a);return()=>{var p;return(p=l[o])==null?void 0:p.splice(c-1,1)}}return a(n.instance),()=>{}},y=new Promise(o=>{if(i.ssr)return;const a=p=>requestAnimationFrame(()=>o(p)),c=i.hooks.hook("script:updated",({script:p})=>{const h=p.status;if(p.id===u&&(h==="loaded"||h==="error")){if(h==="loaded")if(typeof e.use=="function"){const b=e.use();b&&a(b)}else a({});else h==="error"&&o(!1);c()}})}),n=Object.assign(y,{instance:!i.ssr&&((j=e==null?void 0:e.use)==null?void 0:j.call(e))||null,proxy:null,id:u,status:"awaitingLoad",remove(){var o,a;return(o=n._triggerAbortController)==null||o.abort(),n._triggerPromises=[],n.entry?(n.entry.dispose(),d("removed"),(a=i._scripts)==null||delete a[u],!0):!1},load(o){var a;if((a=n._triggerAbortController)==null||a.abort(),n._triggerPromises=[],!n.entry){d("loading");const c={defer:!0,fetchpriority:"low"};s.src&&(s.src.startsWith("http")||s.src.startsWith("//"))&&(c.crossorigin="anonymous",c.referrerpolicy="no-referrer"),n.entry=i.push({script:[{...c,...s,key:`script.${u}`}]},e)}return o&&g("loaded",o),y},onLoaded(o){return g("loaded",o)},onError(o){return g("error",o)},setupTriggerHandler(o){if(n.status==="awaitingLoad")if((typeof o>"u"||o==="client")&&!i.ssr||o==="server")n.load();else if(o instanceof Promise){if(i.ssr)return;n._triggerAbortController||(n._triggerAbortController=new AbortController,n._triggerAbortPromise=new Promise(c=>{n._triggerAbortController.signal.addEventListener("abort",()=>{n._triggerAbortController=null,c()})})),n._triggerPromises=n._triggerPromises||[];const a=n._triggerPromises.push(Promise.race([o.then(c=>typeof c>"u"||c?n.load:void 0),n._triggerAbortPromise]).catch(()=>{}).then(c=>{c==null||c()}).finally(()=>{var c;(c=n._triggerPromises)==null||c.splice(a,1)}))}else typeof o=="function"&&o(n.load)},_cbs:l});y.then(o=>{var a,c;o!==!1?(n.instance=o,(a=l.loaded)==null||a.forEach(p=>p(o)),l.loaded=null):((c=l.error)==null||c.forEach(p=>p()),l.error=null)});const V={script:n};n.setupTriggerHandler(e.trigger),n.$script=n;const E=(o,a,c)=>new Proxy((a?o==null?void 0:o[a]:o)||W,{get(p,h,b){var _;if(i.hooks.callHook("script:instance-fn",{script:n,fn:h,exists:h in p}),!a){const w=(_=e.stub)==null?void 0:_.call(e,{script:n,fn:h});if(w)return w}return p&&h in p&&typeof p[h]<"u"?Reflect.get(p,h,b):h===Symbol.iterator?[][Symbol.iterator]:E(a?o==null?void 0:o[a]:o,h,c||[h])},async apply(p,h,b){if(i.ssr&&p[D])return;let _;const w=m=>{_=m||_;for(let S=0;S<(c||[]).length;S++){const q=(c||[])[S];m=m==null?void 0:m[q]}return m};let v=w(n.instance);return v||(v=await new Promise(m=>{n.onLoaded(S=>{m(w(S))})})),typeof v=="function"?Reflect.apply(v,_,b):v}});n.proxy=E(n.instance);const H=new Proxy(n,{get(o,a){const c=a in n||String(a)[0]==="_"?n:n.proxy;return a==="then"||a==="catch"?n[a].bind(n):Reflect.get(c,a,c)}});return i._scripts=Object.assign(i._scripts||{},{[u]:H}),H}function ie(r){return typeof r=="function"?r():O(r)}function C(r){if(r instanceof Promise||r instanceof Date||r instanceof RegExp)return r;const t=ie(r);if(!r||!t)return t;if(Array.isArray(t))return t.map(s=>C(s));if(typeof t=="object"){const s={};for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if(e==="titleTemplate"||e[0]==="o"&&e[1]==="n"){s[e]=O(t[e]);continue}s[e]=C(t[e])}return s}return t}const ae="usehead",I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L="__unhead_injection_handler__";function R(){return L in I?I[L]():B(ae)||N()}function ce(r,t={}){const s=t.head||R();if(s)return s.ssr?s.push(r,t):ue(s,r,t)}function ue(r,t,s={}){const e=x(!1),i=x({});K(()=>{i.value=e.value?{}:C(t)});const u=r.push(i.value,s);return M(i,d=>{u.patch(d)}),U()&&(z(()=>{u.dispose()}),G(()=>{e.value=!0}),J(()=>{e.value=!1})),u}function fe(r,t){if(!t)return;const s=(e,i)=>{if(!r._cbs[e])return i(r.instance),()=>{};let u=r._cbs[e].push(i);const f=()=>{var d;u&&((d=r._cbs[e])==null||d.splice(u-1,1),u=null)};return P(f),f};r.onLoaded=e=>s("loaded",e),r.onError=e=>s("error",e),P(()=>{var e;(e=r._triggerAbortController)==null||e.abort()})}function le(r,t){const s=typeof r=="string"?{src:r}:r,e=t||{},i=(e==null?void 0:e.head)||R();e.head=i;const u=U();if(e.eventContext=u,u&&typeof e.trigger>"u")e.trigger=Q;else if(X(e.trigger)){const d=e.trigger;let l;e.trigger=new Promise(g=>{l=M(d,y=>{y&&g(!0)},{immediate:!0}),P(()=>g(!1),!0)}).then(g=>(l==null||l(),g))}i._scriptStatusWatcher=i._scriptStatusWatcher||i.hooks.hook("script:updated",({script:d})=>{d._statusRef.value=d.status});const f=se(s,e);return f._statusRef=f._statusRef||x(f.status),fe(f,u),new Proxy(f,{get(d,l,g){return Reflect.get(d,l==="status"?"_statusRef":l,g)}})}function de(){return k().public["nuxt-scripts"]}const ge=["onNuxtReady","client"],pe=["preconnect","dns-prefetch"];function he(r,t,s){const{src:e}=r,i=re(e),u=t&&pe.includes(t),f=u?`${i.protocol}${i.host}`:e,d=!!i.host;if(!t||u&&!d)return;const l={href:f,rel:t,...be(r,["crossorigin","referrerpolicy","fetchpriority","integrity"])},g={fetchpriority:"low"};return t==="preload"&&(g.as="script"),d&&(g.crossorigin="anonymous",g.referrerpolicy="no-referrer"),ce({link:[A(l,g)]},{head:s,tagPriority:"high"})}function ye(r,t){var l,g,y;r=typeof r=="string"?{src:r}:r,t=A(t,(l=de())==null?void 0:l.defaultScriptOptions);const s=String(F(r)),e=Y(),i=t.head||R();e.$scripts=e.$scripts||Z({});const u=!!((g=e.$scripts)!=null&&g[s]);!t.warmupStrategy&&ge.includes(String(t.trigger))&&(t.warmupStrategy="preload"),t.trigger==="onNuxtReady"&&(t.trigger=ee),u||(y=performance==null?void 0:performance.mark)==null||y.call(performance,"mark_feature_usage",{detail:{feature:t.performanceMarkFeature??`nuxt-scripts:${s}`}});const f=le(r,t);f.warmup=n=>{f._warmupEl||(f._warmupEl=he(r,n,i))},t.warmupStrategy&&f.warmup(t.warmupStrategy);const d=f.remove;return f.remove=()=>{var n;return(n=f._warmupEl)==null||n.dispose(),e.$scripts[s]=void 0,d()},e.$scripts[s]=f,f}function me(r){return(k().public.scripts||{})[r]}function we(r,t,s){const e=me(r),i=Object.assign(s||{},typeof e=="object"?e:{}),u=t(i),f=A(i.scriptInput,u.scriptInput,{key:r}),d=Object.assign((i==null?void 0:i.scriptOptions)||{},u.scriptOptions||{}),l=d.beforeInit;return d.beforeInit=()=>{var g;l==null||l(),(g=u.clientInit)==null||g.call(u)},ye(f,d)}function be(r,t){const s={};for(const e of t)e in r&&(s[e]=r[e]);return s}export{ce as a,ye as b,me as s,we as u};
